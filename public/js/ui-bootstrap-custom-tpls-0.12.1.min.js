/*
 * angular-ui-bootstrap
 * http://angular-ui.github.io/bootstrap/

 * Version: 0.12.1 - 2015-02-20
 * License: MIT
 */
angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.typeahead","ui.bootstrap.position","ui.bootstrap.bindHtml","ui.bootstrap.collapse","ui.bootstrap.transition"]),angular.module("ui.bootstrap.tpls",["template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(t){var e=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(n){var i=n.match(e);if(!i)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+n+'".');return{itemName:i[3],source:t(i[4]),viewMapper:t(i[2]||i[1]),modelMapper:t(i[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(t,e,n,i,a,o,r){var s=[9,13,27,38,40];return{require:"ngModel",link:function(c,l,p,u){var d,h=c.$eval(p.typeaheadMinLength)||1,f=c.$eval(p.typeaheadWaitMs)||0,m=c.$eval(p.typeaheadEditable)!==!1,v=e(p.typeaheadLoading).assign||angular.noop,g=e(p.typeaheadOnSelect),y=p.typeaheadInputFormatter?e(p.typeaheadInputFormatter):void 0,$=p.typeaheadAppendToBody?c.$eval(p.typeaheadAppendToBody):!1,b=c.$eval(p.typeaheadFocusFirst)!==!1,w=e(p.ngModel).assign,x=r.parse(p.typeahead),E=c.$new();c.$on("$destroy",function(){E.$destroy()});var M="typeahead-"+E.$id+"-"+Math.floor(1e4*Math.random());l.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":M});var T=angular.element("<div typeahead-popup></div>");T.attr({id:M,matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(p.typeaheadTemplateUrl)&&T.attr("template-url",p.typeaheadTemplateUrl);var C=function(){E.matches=[],E.activeIdx=-1,l.attr("aria-expanded",!1)},k=function(t){return M+"-option-"+t};E.$watch("activeIdx",function(t){0>t?l.removeAttr("aria-activedescendant"):l.attr("aria-activedescendant",k(t))});var I=function(t){var e={$viewValue:t};v(c,!0),n.when(x.source(c,e)).then(function(n){var i=t===u.$viewValue;if(i&&d)if(n.length>0){E.activeIdx=b?0:-1,E.matches.length=0;for(var a=0;a<n.length;a++)e[x.itemName]=n[a],E.matches.push({id:k(a),label:x.viewMapper(E,e),model:n[a]});E.query=t,E.position=$?o.offset(l):o.position(l),E.position.top=E.position.top+l.prop("offsetHeight"),l.attr("aria-expanded",!0)}else C();i&&v(c,!1)},function(){C(),v(c,!1)})};C(),E.query=void 0;var H,q=function(t){H=i(function(){I(t)},f)},S=function(){H&&i.cancel(H)};u.$parsers.unshift(function(t){return d=!0,t&&t.length>=h?f>0?(S(),q(t)):I(t):(v(c,!1),S(),C()),m?t:t?void u.$setValidity("editable",!1):(u.$setValidity("editable",!0),t)}),u.$formatters.push(function(t){var e,n,i={};return y?(i.$model=t,y(c,i)):(i[x.itemName]=t,e=x.viewMapper(c,i),i[x.itemName]=void 0,n=x.viewMapper(c,i),e!==n?e:t)}),E.select=function(t){var e,n,a={};a[x.itemName]=n=E.matches[t].model,e=x.modelMapper(c,a),w(c,e),u.$setValidity("editable",!0),g(c,{$item:n,$model:e,$label:x.viewMapper(c,a)}),C(),i(function(){l[0].focus()},0,!1)},l.bind("keydown",function(t){0!==E.matches.length&&-1!==s.indexOf(t.which)&&(-1!=E.activeIdx||13!==t.which&&9!==t.which)&&(t.preventDefault(),40===t.which?(E.activeIdx=(E.activeIdx+1)%E.matches.length,E.$digest()):38===t.which?(E.activeIdx=(E.activeIdx>0?E.activeIdx:E.matches.length)-1,E.$digest()):13===t.which||9===t.which?E.$apply(function(){E.select(E.activeIdx)}):27===t.which&&(t.stopPropagation(),C(),E.$digest()))}),l.bind("blur",function(){d=!1});var A=function(t){l[0]!==t.target&&(C(),E.$digest())};a.bind("click",A),c.$on("$destroy",function(){a.unbind("click",A),$&&U.remove()});var U=t(T)(E);$?a.find("body").append(U):l.after(U)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(t,e,n){t.templateUrl=n.templateUrl,t.isOpen=function(){return t.matches.length>0},t.isActive=function(e){return t.active==e},t.selectActive=function(e){t.active=e},t.selectMatch=function(e){t.select({activeIdx:e})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(t,e,n,i){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(a,o,r){var s=i(r.templateUrl)(a.$parent)||"template/typeahead/typeahead-match.html";t.get(s,{cache:e}).success(function(t){o.replaceWith(n(t.trim())(a))})}}}]).filter("typeaheadHighlight",function(){function t(t){return t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(e,n){return n?(""+e).replace(new RegExp(t(n),"gi"),"<strong>$&</strong>"):e}}),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(t,e){function n(t,n){return t.currentStyle?t.currentStyle[n]:e.getComputedStyle?e.getComputedStyle(t)[n]:t.style[n]}function i(t){return"static"===(n(t,"position")||"static")}var a=function(e){for(var n=t[0],a=e.offsetParent||n;a&&a!==n&&i(a);)a=a.offsetParent;return a||n};return{position:function(e){var n=this.offset(e),i={top:0,left:0},o=a(e[0]);o!=t[0]&&(i=this.offset(angular.element(o)),i.top+=o.clientTop-o.scrollTop,i.left+=o.clientLeft-o.scrollLeft);var r=e[0].getBoundingClientRect();return{width:r.width||e.prop("offsetWidth"),height:r.height||e.prop("offsetHeight"),top:n.top-i.top,left:n.left-i.left}},offset:function(n){var i=n[0].getBoundingClientRect();return{width:i.width||n.prop("offsetWidth"),height:i.height||n.prop("offsetHeight"),top:i.top+(e.pageYOffset||t[0].documentElement.scrollTop),left:i.left+(e.pageXOffset||t[0].documentElement.scrollLeft)}},positionElements:function(t,e,n,i){var a,o,r,s,c=n.split("-"),l=c[0],p=c[1]||"center";a=i?this.offset(t):this.position(t),o=e.prop("offsetWidth"),r=e.prop("offsetHeight");var u={center:function(){return a.left+a.width/2-o/2},left:function(){return a.left},right:function(){return a.left+a.width}},d={center:function(){return a.top+a.height/2-r/2},top:function(){return a.top},bottom:function(){return a.top+a.height}};switch(l){case"right":s={top:d[p](),left:u[l]()};break;case"left":s={top:d[p](),left:a.left-o};break;case"bottom":s={top:d[l](),left:u[p]()};break;default:s={top:a.top-r,left:u[p]()}}return s}}}]),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(t,e,n){e.addClass("ng-binding").data("$binding",n.bindHtmlUnsafe),t.$watch(n.bindHtmlUnsafe,function(t){e.html(t||"")})}}),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(t){return{link:function(e,n,i){function a(e){function i(){l===a&&(l=void 0)}var a=t(n,e);return l&&l.cancel(),l=a,a.then(i,i),a}function o(){p?(p=!1,r()):(n.removeClass("collapse").addClass("collapsing"),a({height:n[0].scrollHeight+"px"}).then(r))}function r(){n.removeClass("collapsing"),n.addClass("collapse in"),n.css({height:"auto"})}function s(){if(p)p=!1,c(),n.css({height:0});else{n.css({height:n[0].scrollHeight+"px"});{n[0].offsetWidth}n.removeClass("collapse in").addClass("collapsing"),a({height:0}).then(c)}}function c(){n.removeClass("collapsing"),n.addClass("collapse")}var l,p=!0;e.$watch(i.collapse,function(t){t?s():o()})}}}]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(t,e,n){function i(t){for(var e in t)if(void 0!==o.style[e])return t[e]}var a=function(i,o,r){r=r||{};var s=t.defer(),c=a[r.animation?"animationEndEventName":"transitionEndEventName"],l=function(){n.$apply(function(){i.unbind(c,l),s.resolve(i)})};return c&&i.bind(c,l),e(function(){angular.isString(o)?i.addClass(o):angular.isFunction(o)?o(i):angular.isObject(o)&&i.css(o),c||s.resolve(i)}),s.promise.cancel=function(){c&&i.unbind(c,l),s.reject("Transition cancelled")},s.promise},o=document.createElement("trans"),r={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},s={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return a.transitionEndEventName=i(r),a.animationEndEventName=i(s),a}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(t){t.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(t){t.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]);